{% extends 'common/auth_base.html' %}
{% load static %}

{% block title %}Log In - Services AI{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/auth.css' %}">
{% endblock %}

{% block auth_content %}
<div class="auth-card-header">
    <h2 class="fw-bold mb-2">Welcome Back</h2>
    <p class="text-secondary">Log in to your Services AI account</p>
</div>

<div class="auth-card-body">
    <form method="post" action="{% url 'accounts:login' %}" class="needs-validation" novalidate>
        {% csrf_token %}
        
        {% if next %}
        <input type="hidden" name="next" value="{{ next }}">
        {% endif %}
        
        <!-- Username -->
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="username" name="username" placeholder="Username" required>
            <label for="username">Username</label>
            <div class="invalid-feedback">
                Please enter your username.
            </div>
        </div>
        
        <!-- Password -->
        <div class="form-floating mb-3 position-relative">
            <input type="password" class="form-control" id="password" name="password" placeholder="Password" required>
            <label for="password">Password</label>
            <button type="button" class="password-toggle" aria-label="Toggle password visibility">
                <i class="fas fa-eye"></i>
            </button>
            <div class="invalid-feedback">
                Please enter your password.
            </div>
        </div>
        
        <!-- Remember Me & Forgot Password -->
        <div class="d-flex justify-content-between mb-4">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="rememberMe" name="remember_me">
                <label class="form-check-label" for="rememberMe">
                    Remember me
                </label>
            </div>
            <a href="{% url 'accounts:password_reset' %}" class="auth-link">Forgot password?</a>
        </div>
        
        <!-- Display Django Messages -->
        {% if messages %}
        <div class="alert {% if messages.0.tags == 'success' %}alert-success{% else %}alert-danger{% endif %} mb-4">
            <ul class="mb-0 ps-3">
                {% for message in messages %}
                <li>{{ message }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        
        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary auth-btn">
            <span>Log In</span>
        </button>
    </form>
    
    <div class="auth-divider">or</div>
    
    <!-- Social Login Options -->
    <div class="social-login-options">
        <a href="#" class="social-login-btn">
            <i class="fab fa-google"></i>
            <span>Log in with Google</span>
        </a>
        <a href="#" class="social-login-btn">
            <i class="fab fa-microsoft"></i>
            <span>Log in with Microsoft</span>
        </a>
    </div>
</div>
{% endblock %}

{% block auth_secondary_actions %}
<div class="auth-secondary-actions">
    <p class="mb-0">
        Don't have an account? <a href="{% url 'accounts:signup' %}" class="auth-link">Sign up</a>
    </p>
</div>
{% endblock %}
